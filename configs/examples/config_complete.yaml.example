# Mover Status Monitor - Complete Configuration Example
# This example shows all available configuration options
# Copy this file to config.yaml and customize for your setup

# Core monitoring settings
monitoring:
  # Interval between checks in seconds (1-3600)
  interval: 30
  
  # Maximum time to wait for process detection in seconds (1-3600)
  detection_timeout: 60
  
  # Enable dry run mode (no actual notifications sent)
  dry_run: false

# Process detection settings (REQUIRED)
process:
  # Name of the process to monitor (required)
  name: "mover"
  
  # Path patterns to match for process detection (required, at least one)
  paths:
    - "/usr/local/sbin/mover"
    - "/usr/bin/mover"
    - "/opt/mover/bin/mover"

# Progress tracking settings
progress:
  # Minimum progress change to trigger notification (0.0-100.0)
  min_change_threshold: 5.0
  
  # Window size for ETC calculation (1-100 samples)
  estimation_window: 10
  
  # Paths to exclude from size calculations
  exclusions:
    - "/.Trash-*"
    - "/lost+found"
    - "/tmp"
    - "/var/tmp"
    - "/.cache"

# Notification settings
notifications:
  # List of enabled providers (telegram, discord)
  enabled_providers:
    - "telegram"
    - "discord"
  
  # Events that trigger notifications
  events:
    - "started"
    - "progress"
    - "completed"
    - "failed"
  
  # Global notification frequency limits (seconds)
  rate_limits:
    progress: 300  # seconds between progress notifications
    status: 60     # seconds between status notifications

# Logging configuration
logging:
  # Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
  level: "INFO"
  
  # Log format string
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  
  # Log file path (null for console only)
  file: null

# Provider-specific configurations
providers:
  # Telegram provider configuration
  telegram:
    # Bot token from @BotFather (required)
    bot_token: "123456789:ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijk"
    
    # Chat IDs to send notifications to (required, at least one)
    chat_ids:
      - -1001234567890  # Group chat ID (negative for groups)
      - 123456789       # User chat ID (positive for users)
    
    # Message formatting options
    format:
      # Parse mode: "HTML", "Markdown", or "MarkdownV2"
      parse_mode: "HTML"
      
      # Disable link previews in messages
      disable_web_page_preview: true
      
      # Disable notification sound
      disable_notification: false
    
    # Message templates for different events
    templates:
      started: |
        üöÄ <b>Mover Started</b>
        
        üìä Initial data: {initial_size}
        üìÅ Source: {source_path}
        üìÅ Destination: {destination_path}
        
        <i>Started at {start_time}</i>
      
      progress: |
        üìà <b>Mover Progress</b>
        
        ‚úÖ Progress: {progress_percent}%
        üìä Transferred: {transferred_size} / {total_size}
        ‚è±Ô∏è Speed: {transfer_rate}
        üïê ETC: {etc}
        
        <i>Updated at {update_time}</i>
      
      completed: |
        ‚úÖ <b>Mover Completed</b>
        
        üìä Total transferred: {total_size}
        ‚è±Ô∏è Duration: {duration}
        üíæ Average speed: {avg_speed}
        
        <i>Completed at {completion_time}</i>
      
      failed: |
        ‚ùå <b>Mover Failed</b>
        
        üö® Error: {error_message}
        üìä Progress at failure: {progress_percent}%
        
        <i>Failed at {failure_time}</i>
    
    # Notification settings
    notifications:
      # Rate limiting (seconds between notifications)
      rate_limits:
        progress: 300
        status: 60
    
    # Retry settings for failed requests
    retry:
      max_attempts: 3
      backoff_factor: 2.0
      timeout: 30

  # Discord provider configuration
  discord:
    # Discord webhook URL (required)
    webhook_url: "https://discord.com/api/webhooks/123456789012345678/ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123456789012"
    
    # Bot username override (optional)
    username: "Mover Status Bot"
    
    # Bot avatar URL (optional)
    avatar_url: "https://example.com/bot-avatar.png"
    
    # Embed customization
    embeds:
      # Enable rich embeds (true) or simple messages (false)
      enabled: true
      
      # Color scheme for different states (hex values 0x000000-0xffffff)
      colors:
        started: 0x00ff00    # Green
        progress: 0x0099ff   # Blue
        completed: 0x00cc00  # Dark green
        failed: 0xff0000     # Red
      
      # Include thumbnail image in embeds
      thumbnail: true
      
      # Include timestamp in embeds
      timestamp: true
    
    # Notification settings
    notifications:
      # Mention roles or users for specific events
      mentions:
        started: []
        failed: ["@everyone"]
        completed: []
      
      # Rate limiting (seconds between notifications)
      rate_limits:
        progress: 300
        status: 60
    
    # Retry settings for failed requests
    retry:
      max_attempts: 3
      backoff_factor: 2.0
      timeout: 30
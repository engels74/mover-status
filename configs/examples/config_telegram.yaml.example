# Mover Status Monitor - Telegram Provider Configuration
# This file should be saved as config_telegram.yaml in the same directory as config.yaml
# This configuration is loaded automatically when "telegram" is enabled in config.yaml

# Telegram provider configuration
telegram:
  # Bot token from @BotFather (required)
  # Get this by creating a new bot: https://t.me/BotFather
  bot_token: "123456789:ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijk"
  
  # Chat IDs to send notifications to (required, at least one)
  # Group chat IDs are negative, user chat IDs are positive
  # To find chat ID: Add bot to chat/group and send /chatid command
  chat_ids:
    - -1001234567890  # Group chat ID (negative for groups)
    - 123456789       # User chat ID (positive for users)
  
  # Message formatting options
  format:
    # Parse mode: "HTML", "Markdown", or "MarkdownV2"
    parse_mode: "HTML"
    
    # Disable link previews in messages
    disable_web_page_preview: true
    
    # Disable notification sound
    disable_notification: false
  
  # Message templates for different events
  # Available variables: {initial_size}, {source_path}, {destination_path}, 
  # {start_time}, {progress_percent}, {transferred_size}, {total_size}, 
  # {transfer_rate}, {etc}, {update_time}, {duration}, {avg_speed}, 
  # {completion_time}, {error_message}, {failure_time}
  templates:
    started: |
      🚀 <b>Mover Started</b>
      
      📊 Initial data: {initial_size}
      📁 Source: {source_path}
      📁 Destination: {destination_path}
      
      <i>Started at {start_time}</i>
    
    progress: |
      📈 <b>Mover Progress</b>
      
      ✅ Progress: {progress_percent}%
      📊 Transferred: {transferred_size} / {total_size}
      ⏱️ Speed: {transfer_rate}
      🕐 ETC: {etc}
      
      <i>Updated at {update_time}</i>
    
    completed: |
      ✅ <b>Mover Completed</b>
      
      📊 Total transferred: {total_size}
      ⏱️ Duration: {duration}
      💾 Average speed: {avg_speed}
      
      <i>Completed at {completion_time}</i>
    
    failed: |
      ❌ <b>Mover Failed</b>
      
      🚨 Error: {error_message}
      📊 Progress at failure: {progress_percent}%
      
      <i>Failed at {failure_time}</i>
  
  # Notification settings
  notifications:
    # Events to send notifications for (overrides main config if specified)
    events: ["started", "progress", "completed", "failed"]
    
    # Rate limiting (seconds between notifications)
    rate_limits:
      progress: 300
      status: 60
  
  # Retry settings for failed requests
  retry:
    max_attempts: 3
    backoff_factor: 2.0
    timeout: 30

# Environment variable overrides:
# MOVER_STATUS_TELEGRAM__BOT_TOKEN=your_bot_token
# MOVER_STATUS_TELEGRAM__CHAT_IDS__0=-1001234567890
# MOVER_STATUS_TELEGRAM__FORMAT__PARSE_MODE=HTML